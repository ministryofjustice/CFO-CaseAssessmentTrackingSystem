@page "/"
@using Cfo.Cats.Application.Common.Enums
@using Cfo.Cats.Domain.Common.Enums
@using Cfo.Cats.Server.UI.Pages.Dashboard.Components
@using Cfo.Cats.Server.UI.Pages.Participants.Components.QAResults

@inherits CatsComponentBase

<MudText Typo="Typo.h3">
    Dashboard
</MudText>

<MudGrid Class="mt-2">

    @if (_showMyTeamsParticipants)
    {
        <MyTeamsParticipantsComponent/>
    }
    else
    {
        <MyParticipantsComponent/>
    }

    <MyNotifications/>

    @if (_showCaseWorkload)
    {
        <CaseWorkload/>
    }

    @if (_showRiskDueAggregate)
    {
        <RiskDueAggregateComponent/>
    }
    else
    {
        <MyRiskDueComponent/>
    }

    @if (_showMyTeamsParticipants)
    {
        <MyTeamsParticipantsLatestEngagementComponent/>
    }
    else
    {
        <MyParticipantsLatestEngagementComponent/>
    }

    @if (_showQaPots)
    {
        <QaPots/>
    }

    @if (_showSyncComponent)
    {
        <SyncComponent/>
    }

    @if (_showJobManagement)
    {
        <CacheControl/>
        <JobManagement/>
    }

    <QAActivitiesResults JustMyParticipants="_showMyTeamsParticipants is false"/>
    <QAEnrolmentsResults JustMyParticipants="_showMyTeamsParticipants is false"/>

    @if (_showMyTeamsParticipants)
    {
        <MyTeamsParticipantsInLicenceEndPeriod/>
    }
    else
    {
        <MyParticipantsInLicenceEndPeriod/>
    }

    @if (_showMyTeamsParticipants)
    {
        <MyTeamsArchivedCases/>
    }
    else
    {
        <MyArchivedCases/>
    }

	
    @* The DateRange parameter can be changed when component added to CFO QA dashboard *@
    @* <FirstPassQAActivitiesDetailsComponent DateRange="@_dateRange" UserId="@SelectedUserId" @key="SelectedUserId + (_dateRange.Start?.Ticks ?? 0) + (_dateRange.End?.Ticks ?? 0)" VisualMode="@_visualMode" /> *@
    <FirstPassQAActivitiesDetailsComponent DateRange="@(new DateRange(DateTime.Today.AddDays(-100), DateTime.Today))"/>
</MudGrid>