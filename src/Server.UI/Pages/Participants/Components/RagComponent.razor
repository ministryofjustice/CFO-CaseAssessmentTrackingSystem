@using Cfo.Cats.Domain.Common.Enums
@using Cfo.Cats.Application.Features.Assessments.DTOs
@using System.Data

@if (_validator.Validate(Pathway).IsValid)
{
   <MudChip T="string" Icon="@Pathway.Icon" Label="true" Color="@GetColor(Pathway.GetRagScore(18, AssessmentLocation.EastMidlandsAssessmentLocation, Sex.MaleSex))">
        @Pathway.Title
    </MudChip>
}
else
{
    <MudChip T="string" Icon="@Pathway.Icon" Label="true" Color="Color.Primary" Disabled="true">
        @Pathway.Title
    </MudChip>
}

@code {

    [Parameter, EditorRequired]
    public PathwayBase Pathway { get; set; } = default!;

    public AssessmentPathwayValidator _validator = new AssessmentPathwayValidator();
    

    private Color GetColor(double ragScore) =>
        ragScore switch
        {
            > 25 => Color.Success,
            >10 => Color.Warning,
            _ => Color.Error,
        };
}