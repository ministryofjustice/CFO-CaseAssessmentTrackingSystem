@using Cfo.Cats.Application.Features.Activities.DTOs
@using Cfo.Cats.Domain.Common.Enums
@using Cfo.Cats.Server.UI.Pages.Activities.Components

<MudForm>
    <MudList T="string">        
        <MudListSubheader>
            <ChildContent>
                <MudText Typo="Typo.h5">Activity Confirmation</MudText>
            </ChildContent>
        </MudListSubheader>
        <MudDivider />
        <MudListItem Href="@($"/pages/participants/{Activity.Participant!.Id}")">
            <MudText Typo="Typo.body1">Case Ref</MudText>
            <MudText Typo="Typo.body2">@Activity.Participant!.Id</MudText>
        </MudListItem>
        <MudListItem>
            <MudText Typo="Typo.body1">Participant</MudText>
            <MudText Typo="Typo.body2">@Activity.Participant!.FullName</MudText>
        </MudListItem>
        <MudListItem>
            <MudText Typo="Typo.body1">
                Date Of Birth
            </MudText>
            <MudText Typo="Typo.body2">
                @Activity.Participant!.DateOfBirth
            </MudText>
        </MudListItem>
        @foreach (var item in Activity.Participant!.ExternalIdentifiers)
        {
            <MudListItem>
                <MudText Typo="Typo.body1">@item.Type</MudText>
                <MudText Typo="Typo.body2">@item.Value</MudText>
            </MudListItem>
        }
        <MudDivider />
        <MudListItem>
            <MudText Typo="Typo.body1">Activity</MudText>
            <MudText Typo="Typo.body2">@Activity.Definition!.Name</MudText>
        </MudListItem>
        <MudListItem>
            <MudText Typo="Typo.body1">Activity Location</MudText>
            <MudText Typo="Typo.body2">@Activity.Location!.Name</MudText>
        </MudListItem>
        <MudListItem>            
            <MudText Typo="Typo.body1">Date activity took place</MudText>
            <MudText Typo="Typo.body2">@Activity.CommencedOn</MudText>
        </MudListItem>
        <MudListItem>
            <MudText Typo="Typo.body1">Additional Information</MudText>
            <MudText Typo="Typo.body2">@Activity.AdditionalInformation</MudText>
        </MudListItem>

        @if (Activity.Definition is { Classification.RequiresFurtherInformation: true })
        {
            @if (Activity.Definition.Classification == ClassificationType.EducationAndTraining)
            {
                <MudListItem>
                    <EducationTraining Model="Activity.EducationTrainingTemplate" ReadOnlyFlag="true" />
                </MudListItem>
            }
            else 
            {
                <MudListItem Disabled="true">                
                    @if (Activity.Definition.Classification == ClassificationType.Employment)
                    {                
                            <Employment Model="Activity.EmploymentTemplate" />                    
                    }
                    else if (Activity.Definition.Classification == ClassificationType.ISWActivity)
                    {                    
                            <Isw Model="Activity.ISWTemplate" />                    
                    }                
                </MudListItem>
            }
        }
    </MudList>        
</MudForm>        

@code{
    [Parameter, EditorRequired]
    public ActivityQaDetailsDto Activity { get; set; } = default!;
}