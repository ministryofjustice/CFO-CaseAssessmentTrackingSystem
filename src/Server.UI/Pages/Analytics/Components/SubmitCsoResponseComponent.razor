@using Cfo.Cats.Application.Common.Validators
@using Cfo.Cats.Application.Features.ManagementInformation.Commands.AddOutcomeQualityDipSampleCso
@using Cfo.Cats.Application.SecurityConstants
@using Cfo.Cats.Domain.Common.Enums

@attribute [Authorize(Policy = SecurityPolicies.OutcomeQualityDipChecks)]

@inject IAuthorizationService AuthorizationService
@inject AuthenticationStateProvider AuthenticationStateProvider

@inherits CatsComponentBase


@if (Status != DipSampleStatus.AwaitingReview)
{
    <MudAlert Severity="Severity.Info">
        This information is now readonly because the sample is at the @Status.Name stage.
    </MudAlert>
}

<MudForm @ref="_form" Model="Command" Validation="@(Validator.ValidateValue(Command))" Class="ma-2" ReadOnly="ReadOnly">
    <MudGrid>
        <MudItem xs="12" md="8">
            <MudStack Row="true" AlignItems="AlignItems.Center">
                <MudAvatar Size="Size.Medium" Color="@Color.Primary">
                    A
                </MudAvatar>
                <MudText Typo="Typo.subtitle1" id="participant-journey-label">
                    @Command.GetMemberDescription(x => x.HasClearParticipantJourney)
                </MudText>
            </MudStack>
            
        </MudItem>
        <MudItem xs="12" md="4" Class="d-flex align-center">
            <MudRadioGroup @bind-Value="Command.HasClearParticipantJourney" For="@(() => Command.HasClearParticipantJourney)">
                <MudRadio Value="@DipSampleAnswer.Yes">@DipSampleAnswer.Yes.Name</MudRadio>
                <MudRadio Value="@DipSampleAnswer.No">@DipSampleAnswer.No.Name</MudRadio>
            </MudRadioGroup>
        </MudItem>

        <MudItem xs="12" md="8">
            <MudStack Row="true" AlignItems="AlignItems.Center">
                <MudAvatar Size="Size.Medium" Color="@Color.Primary">
                    B
                </MudAvatar>            
                <MudText Typo="Typo.subtitle1" id="participant-journey-label">
                    @Command.GetMemberDescription(x => x.ShowsTaskProgression)
                </MudText>
            </MudStack>
        </MudItem>
        <MudItem xs="12" md="4" Class="d-flex align-center">
            <MudRadioGroup @bind-Value="Command.ShowsTaskProgression" For="@(() => Command.ShowsTaskProgression)">
                <MudRadio Value="@DipSampleAnswer.Yes">@DipSampleAnswer.Yes.Name</MudRadio>
                <MudRadio Value="@DipSampleAnswer.No">@DipSampleAnswer.No.Name</MudRadio>
            </MudRadioGroup>
        </MudItem>

        <MudItem xs="12" md="8">
            <MudStack Row="true" AlignItems="AlignItems.Center">
                <MudAvatar Size="Size.Medium" Color="@Color.Primary">
                    C
                </MudAvatar>            
                <MudText Typo="Typo.subtitle1" id="participant-journey-label">
                    @Command.GetMemberDescription(x => x.ActivitiesLinkToTasks)
                </MudText>
            </MudStack>
        </MudItem>
        <MudItem xs="12" md="4" Class="d-flex align-center">
            <MudRadioGroup @bind-Value="Command.ActivitiesLinkToTasks" For="@(() => Command.ActivitiesLinkToTasks)">
                <MudRadio Value="@DipSampleAnswer.Yes">@DipSampleAnswer.Yes.Name</MudRadio>
                <MudRadio Value="@DipSampleAnswer.No">@DipSampleAnswer.No.Name</MudRadio>
            </MudRadioGroup>
        </MudItem>

        <MudItem xs="12" md="8">
            <MudStack Row="true" AlignItems="AlignItems.Center">
                <MudAvatar Size="Size.Medium" Color="@Color.Primary">
                    D
                </MudAvatar>            
                <MudText Typo="Typo.subtitle1" id="participant-journey-label">
                    @Command.GetMemberDescription(x => x.TTGDemonstratesGoodPRIProcess)
                </MudText>
            </MudStack>

        </MudItem>
        <MudItem xs="12" md="4" Class="d-flex align-center">
            <MudRadioGroup @bind-Value="Command.TTGDemonstratesGoodPRIProcess" For="@(() => Command.TTGDemonstratesGoodPRIProcess)">
                <MudRadio Value="@DipSampleAnswer.Yes">@DipSampleAnswer.Yes.Name</MudRadio>
                <MudRadio Value="@DipSampleAnswer.No">@DipSampleAnswer.No.Name</MudRadio>
                <MudRadio Value="@DipSampleAnswer.NotApplicable">@DipSampleAnswer.NotApplicable.Name</MudRadio>
            </MudRadioGroup>
        </MudItem>
        
        <MudItem xs="12" md="8">
            <MudStack Row="true" AlignItems="AlignItems.Center">
                <MudAvatar Size="Size.Medium" Color="@Color.Primary">
                    E
                </MudAvatar> 
                <MudText Typo="Typo.subtitle1" id="participant-journey-label">
                    @Command.GetMemberDescription(x => x.SupportsJourney)
                </MudText>
            </MudStack>
        </MudItem>
        <MudItem xs="12" md="4" Class="d-flex align-center">
            <MudRadioGroup @bind-Value="Command.SupportsJourney" For="@(() => Command.SupportsJourney)">
                <MudRadio Value="@DipSampleAnswer.Yes">@DipSampleAnswer.Yes.Name</MudRadio>
                <MudRadio Value="@DipSampleAnswer.No">@DipSampleAnswer.No.Name</MudRadio>
                <MudRadio Value="@DipSampleAnswer.NotApplicable">@DipSampleAnswer.NotApplicable.Name</MudRadio>
            </MudRadioGroup>
        </MudItem>

        <MudItem xs="12" md="8">
            <MudStack Row="true" AlignItems="AlignItems.Center">
                <MudAvatar Size="Size.Medium" Color="@Color.Primary">
                    F
                </MudAvatar>
                <MudText Typo="Typo.subtitle1" id="participant-journey-label">
                    @Command.GetMemberDescription(x => x.AlignsWithDoS)
                </MudText>
            </MudStack>
        </MudItem>
        <MudItem xs="12" md="4" Class="d-flex align-center">
            <MudRadioGroup @bind-Value="Command.AlignsWithDoS" For="@(() => Command.AlignsWithDoS)">
                <MudRadio Value="@DipSampleAnswer.Yes">@DipSampleAnswer.Yes.Name</MudRadio>
                <MudRadio Value="@DipSampleAnswer.No">@DipSampleAnswer.No.Name</MudRadio>
                <MudRadio Value="@DipSampleAnswer.NotApplicable">@DipSampleAnswer.NotApplicable.Name</MudRadio>
            </MudRadioGroup>
        </MudItem>
        
        <MudItem xs="12" md="3">
            <MudText Typo="Typo.subtitle1">
                @Command.GetMemberDescription(x => x.Comments)
            </MudText>
        </MudItem>
        <MudItem xs="12" md="9" Class="d-flex align-center">
            <MudTextField Label=""
                          @bind-Value="@Command.Comments"
                          For="@(() => Command.Comments)"
                          Lines="5"
                          MaxLength=@ValidationConstants.NotesLength
                          Counter=@ValidationConstants.NotesLength
                          Immediate="true"> 
            </MudTextField>
        </MudItem>

        <MudItem xs="12" md="8">
            <MudStack Row="true" AlignItems="AlignItems.Center">
                <MudAvatar Size="Size.Medium" Color="@Color.Primary">
                    ?
                </MudAvatar> 
                <MudText Typo="Typo.subtitle1" id="participant-journey-label">
                    @Command.GetMemberDescription(x => x.ComplianceAnswer)
                </MudText>
            </MudStack>
           
        </MudItem>
        <MudItem xs="12" md="4" Class="d-flex align-center">
            <MudRadioGroup @bind-Value="Command.ComplianceAnswer" For="@(() => Command.ComplianceAnswer)">
                <MudRadio Value="@ComplianceAnswer.Compliant">@ComplianceAnswer.Compliant.Name</MudRadio>
                <MudRadio Value="@ComplianceAnswer.NotCompliant">@ComplianceAnswer.NotCompliant.Name</MudRadio>
                <MudRadio Value="@ComplianceAnswer.Unsure">@ComplianceAnswer.Unsure.Name</MudRadio>
            </MudRadioGroup>
        </MudItem>
        
        <MudItem xs="12">
            <MudButton Disabled="@ReadOnly" Variant="Variant.Outlined" Color="Color.Primary" OnClick="OnSubmit">Submit</MudButton>
        </MudItem>
        
    </MudGrid>
</MudForm>